## 1. 实现准备

- [ ] 1.1 查看现有代码结构，确认 WebServiceManager 和 webServiceSaga 的当前实现
- [ ] 1.2 确认 shadcn/ui Dialog 组件已在项目中可用
- [ ] 1.3 查看现有的国际化文件结构

## 2. Redux 状态管理

- [ ] 2.1 在 `webServiceSlice.ts` 中添加确认对话框状态
  - [ ] 2.1.1 添加 `showConfirmDialog` 状态字段
  - [ ] 2.1.2 添加 `pendingInstallVersion` 状态字段
  - [ ] 2.1.3 添加 `showInstallConfirm` action
  - [ ] 2.1.4 添加 `hideInstallConfirm` action
  - [ ] 2.1.5 添加相应的 selectors

## 3. Saga 逻辑更新

- [ ] 3.1 在 `webServiceSaga.ts` 中修改安装 saga
  - [ ] 3.1.1 修改 `installWebServicePackageSaga` 函数签名和实现
  - [ ] 3.1.2 在安装前检查服务状态
  - [ ] 3.1.3 如果服务运行中，触发确认对话框显示
  - [ ] 3.1.4 添加确认后继续安装的 saga（`installAfterStopSaga`）
  - [ ] 3.1.5 添加停止服务后自动安装的协调逻辑

## 4. UI 组件开发

- [ ] 4.1 创建确认对话框组件
  - [ ] 4.1.1 创建 `InstallConfirmDialog.tsx` 组件
  - [ ] 4.1.2 使用 shadcn/ui Dialog 组件
  - [ ] 4.1.3 实现对话框内容和按钮
  - [ ] 4.1.4 连接 Redux 状态和 actions

- [ ] 4.2 集成到版本管理页面
  - [ ] 4.2.1 在 `VersionManagementPage.tsx` 中导入确认对话框组件
  - [ ] 4.2.2 在渲染区域添加确认对话框
  - [ ] 4.2.3 连接现有的安装/重装按钮逻辑

## 5. 国际化支持

- [ ] 5.1 添加中文翻译
  - [ ] 5.1.1 在 `zh-CN/components.json` 中添加确认对话框相关翻译键
  - [ ] 5.1.2 添加标题、描述、按钮文本翻译

- [ ] 5.2 添加英文翻译
  - [ ] 5.2.1 在 `en-US/components.json` 中添加确认对话框相关翻译键
  - [ ] 5.2.2 添加标题、描述、按钮文本翻译

## 6. 测试和验证

- [ ] 6.1 功能测试
  - [ ] 6.1.1 测试服务运行时点击安装按钮，确认对话框正确显示
  - [ ] 6.1.2 测试点击取消按钮，对话框关闭且不执行安装
  - [ ] 6.1.3 测试点击确认按钮，服务停止后执行安装
  - [ ] 6.1.4 测试服务未运行时点击安装，直接安装不显示对话框
  - [ ] 6.1.5 测试重装操作同样显示确认对话框

- [ ] 6.2 边界情况测试
  - [ ] 6.2.1 测试服务停止失败时的错误处理
  - [ ] 6.2.2 测试安装失败时的状态恢复
  - [ ] 6.2.3 测试连续快速点击安装按钮的行为

- [ ] 6.3 国际化测试
  - [ ] 6.3.1 测试中英文切换时对话框文本正确显示
  - [ ] 6.3.2 验证翻译文本的准确性和一致性

## 7. 代码审查和清理

- [ ] 7.1 代码审查
  - [ ] 7.1.1 检查代码风格一致性
  - [ ] 7.1.2 确认 TypeScript 类型定义完整
  - [ ] 7.1.3 验证错误处理逻辑完备

- [ ] 7.2 文档更新
  - [ ] 7.2.1 更新相关代码注释
  - [ ] 7.2.2 确认提案文档与实现一致
